<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="815px" preserveAspectRatio="none" style="width:764px;height:815px;" version="1.1" viewBox="0 0 764 815" width="764px" zoomAndPan="magnify"><defs><filter height="1" id="b1puasinv9hqkl0" width="1" x="0" y="0"><feFlood flood-color="#E6E6E6" result="flood"/><feComposite in="SourceGraphic" in2="flood" operator="over"/></filter></defs><g><rect fill="#FFFFFF" height="322.9961" style="stroke: #5D5D5D; stroke-width: 1.0;" width="654" x="13" y="102.3125"/><rect fill="#FFFFFF" height="174.082" style="stroke: #5D5D5D; stroke-width: 1.0;" width="560" x="149" y="439.3086"/><rect fill="#FFFFFF" height="80.8691" style="stroke: #5D5D5D; stroke-width: 1.0;" width="604.5" x="149" y="627.3906"/><line style="stroke: #5D5D5D; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="60" x2="60" y1="85.3125" y2="725.2598"/><line style="stroke: #5D5D5D; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="186" x2="186" y1="85.3125" y2="725.2598"/><line style="stroke: #5D5D5D; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="547" x2="547" y1="85.3125" y2="725.2598"/><line style="stroke: #5D5D5D; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="703.5" x2="703.5" y1="85.3125" y2="725.2598"/><text fill="#5D5D5D" font-family="Tahoma" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="68" x="23" y="82.0078">Customer</text><ellipse cx="60" cy="13" fill="#FFFFFF" rx="8" ry="8" style="stroke: #5D5D5D; stroke-width: 2.0;"/><path d="M60,21 L60,48 M47,29 L73,29 M60,48 L47,63 M60,48 L73,63 " fill="none" style="stroke: #5D5D5D; stroke-width: 2.0;"/><text fill="#5D5D5D" font-family="Tahoma" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="68" x="23" y="740.2676">Customer</text><ellipse cx="60" cy="753.5723" fill="#FFFFFF" rx="8" ry="8" style="stroke: #5D5D5D; stroke-width: 2.0;"/><path d="M60,761.5723 L60,788.5723 M47,769.5723 L73,769.5723 M60,788.5723 L47,803.5723 M60,788.5723 L73,803.5723 " fill="none" style="stroke: #5D5D5D; stroke-width: 2.0;"/><rect fill="#5D5D5D" height="52.625" style="stroke: #5D5D5D; stroke-width: 1.5;" width="54" x="159" y="31.6875"/><text fill="#FFFFFF" font-family="Tahoma" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="40" x="166" y="54.6953">Client</text><text fill="#FFFFFF" font-family="Tahoma" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="29" x="171.5" y="74.0078">App</text><rect fill="#5D5D5D" height="52.625" style="stroke: #5D5D5D; stroke-width: 1.5;" width="54" x="159" y="724.2598"/><text fill="#FFFFFF" font-family="Tahoma" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="40" x="166" y="747.2676">Client</text><text fill="#FFFFFF" font-family="Tahoma" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="29" x="171.5" y="766.5801">App</text><rect fill="#5D5D5D" height="52.625" style="stroke: #5D5D5D; stroke-width: 1.5;" width="70" x="512" y="31.6875"/><text fill="#FFFFFF" font-family="Tahoma" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="56" x="519" y="54.6953">Farfetch</text><text fill="#FFFFFF" font-family="Tahoma" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="28" x="533" y="74.0078">STS</text><rect fill="#5D5D5D" height="52.625" style="stroke: #5D5D5D; stroke-width: 1.5;" width="70" x="512" y="724.2598"/><text fill="#FFFFFF" font-family="Tahoma" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="56" x="519" y="747.2676">Farfetch</text><text fill="#FFFFFF" font-family="Tahoma" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="28" x="533" y="766.5801">STS</text><rect fill="#5D5D5D" height="33.3125" style="stroke: #5D5D5D; stroke-width: 1.5;" width="79" x="664.5" y="51"/><text fill="#FFFFFF" font-family="Tahoma" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="65" x="671.5" y="74.0078">/wishlists</text><rect fill="#5D5D5D" height="33.3125" style="stroke: #5D5D5D; stroke-width: 1.5;" width="79" x="664.5" y="724.2598"/><text fill="#FFFFFF" font-family="Tahoma" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="65" x="671.5" y="747.2676">/wishlists</text><path d="M13,102.3125 L238,102.3125 L238,109.3125 L228,119.3125 L13,119.3125 L13,102.3125 " fill="#FFFFFF" style="stroke: #5D5D5D; stroke-width: 1.0;"/><rect fill="none" height="322.9961" style="stroke: #5D5D5D; stroke-width: 1.0;" width="654" x="13" y="102.3125"/><text fill="#5D5D5D" font-family="Tahoma" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="28" y="116.3188">Authorization Code request</text><polygon fill="#5D5D5D" points="174,138.9023,184,142.9023,174,146.9023,178,142.9023" style="stroke: #5D5D5D; stroke-width: 1.0;"/><line style="stroke: #5D5D5D; stroke-width: 2.0;" x1="60" x2="180" y1="142.9023" y2="142.9023"/><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="67" y="138.0107">Clicks in login link</text><polygon fill="#5D5D5D" points="535,206.3594,545,210.3594,535,214.3594,539,210.3594" style="stroke: #5D5D5D; stroke-width: 1.0;"/><line style="stroke: #5D5D5D; stroke-width: 2.0;" x1="186" x2="541" y1="210.3594" y2="210.3594"/><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="176" x="193" y="168.9092">Requests Authorization Code</text><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="193" y="187.1885">reponse_type=code</text><text fill="#5D5D5D" filter="url(#b1puasinv9hqkl0)" font-family="monospace" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="322" y="185.876">id_token</text><text fill="#5D5D5D" filter="url(#b1puasinv9hqkl0)" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="193" y="205.4678">+ openid scope</text><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="10" x="292" y="205.4678">+</text><text fill="#5D5D5D" font-family="monospace" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="306" y="204.1553">offline_access</text><polygon fill="#5D5D5D" points="71,238.6387,61,242.6387,71,246.6387,67,242.6387" style="stroke: #5D5D5D; stroke-width: 1.0;"/><line style="stroke: #5D5D5D; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="65" x2="546" y1="242.6387" y2="242.6387"/><text fill="#5D5D5D" font-family="monospace" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="77" y="236.4346">302 Found</text><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="204" x="153" y="237.7471">redirect to authentication prompt</text><polygon fill="#5D5D5D" points="535,286.4355,545,290.4355,535,294.4355,539,290.4355" style="stroke: #5D5D5D; stroke-width: 1.0;"/><line style="stroke: #5D5D5D; stroke-width: 2.0;" x1="60" x2="541" y1="290.4355" y2="290.4355"/><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="67" y="268.6455">User authenticates with</text><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="210" x="67" y="285.5439">username, password, and consent</text><line style="stroke: #5D5D5D; stroke-width: 2.0;" x1="547" x2="589" y1="355.1309" y2="355.1309"/><line style="stroke: #5D5D5D; stroke-width: 2.0;" x1="589" x2="589" y1="355.1309" y2="368.1309"/><line style="stroke: #5D5D5D; stroke-width: 2.0;" x1="548" x2="589" y1="368.1309" y2="368.1309"/><polygon fill="#5D5D5D" points="558,364.1309,548,368.1309,558,372.1309,554,368.1309" style="stroke: #5D5D5D; stroke-width: 1.0;"/><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="554" y="316.4424">Validates</text><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="554" y="333.3408">Resource Owner</text><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="554" y="350.2393">credentials</text><polygon fill="#5D5D5D" points="197,413.3086,187,417.3086,197,421.3086,193,417.3086" style="stroke: #5D5D5D; stroke-width: 1.0;"/><line style="stroke: #5D5D5D; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="191" x2="546" y1="417.3086" y2="417.3086"/><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="179" x="203" y="394.1377">Authorization Code Response</text><text fill="#5D5D5D" filter="url(#b1puasinv9hqkl0)" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="10" x="203" y="412.417">+</text><text fill="#5D5D5D" filter="url(#b1puasinv9hqkl0)" font-family="monospace" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="217" y="411.1045">id_token</text><path d="M149,439.3086 L337,439.3086 L337,446.3086 L327,456.3086 L149,456.3086 L149,439.3086 " fill="#FFFFFF" style="stroke: #5D5D5D; stroke-width: 1.0;"/><rect fill="none" height="174.082" style="stroke: #5D5D5D; stroke-width: 1.0;" width="560" x="149" y="439.3086"/><text fill="#5D5D5D" font-family="Tahoma" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="143" x="164" y="453.3149">Access Token request</text><polygon fill="#5D5D5D" points="535,492.7969,545,496.7969,535,500.7969,539,496.7969" style="stroke: #5D5D5D; stroke-width: 1.0;"/><line style="stroke: #5D5D5D; stroke-width: 2.0;" x1="186" x2="541" y1="496.7969" y2="496.7969"/><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="172" x="193" y="475.0068">Requests Access Token with</text><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="250" x="193" y="491.9053">Client Credentials and Authorization Code</text><line style="stroke: #5D5D5D; stroke-width: 2.0;" x1="547" x2="589" y1="561.4922" y2="561.4922"/><line style="stroke: #5D5D5D; stroke-width: 2.0;" x1="589" x2="589" y1="561.4922" y2="574.4922"/><line style="stroke: #5D5D5D; stroke-width: 2.0;" x1="548" x2="589" y1="574.4922" y2="574.4922"/><polygon fill="#5D5D5D" points="558,570.4922,548,574.4922,558,578.4922,554,574.4922" style="stroke: #5D5D5D; stroke-width: 1.0;"/><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="554" y="522.8037">Validates</text><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="554" y="539.7021">Client Credentials</text><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="143" x="554" y="556.6006">and Authorization Code</text><polygon fill="#5D5D5D" points="197,601.3906,187,605.3906,197,609.3906,193,605.3906" style="stroke: #5D5D5D; stroke-width: 1.0;"/><line style="stroke: #5D5D5D; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="191" x2="546" y1="605.3906" y2="605.3906"/><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="337" x="203" y="600.499">Access Token Response (and optionally Refresh Token)</text><path d="M149,627.3906 L369,627.3906 L369,634.3906 L359,644.3906 L149,644.3906 L149,627.3906 " fill="#FFFFFF" style="stroke: #5D5D5D; stroke-width: 1.0;"/><rect fill="none" height="80.8691" style="stroke: #5D5D5D; stroke-width: 1.0;" width="604.5" x="149" y="627.3906"/><text fill="#5D5D5D" font-family="Tahoma" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="175" x="164" y="641.397">Protected resource access</text><polygon fill="#5D5D5D" points="692,665.3613,702,669.3613,692,673.3613,696,669.3613" style="stroke: #5D5D5D; stroke-width: 1.0;"/><line style="stroke: #5D5D5D; stroke-width: 2.0;" x1="186" x2="698" y1="669.3613" y2="669.3613"/><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="193" y="664.4697">Requests Resources (</text><text fill="#5D5D5D" font-family="monospace" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="288" x="325" y="663.1572">Authorization: Bearer &lt;access token&gt;</text><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="5" x="613" y="664.4697">)</text><polygon fill="#5D5D5D" points="197,696.2598,187,700.2598,197,704.2598,193,700.2598" style="stroke: #5D5D5D; stroke-width: 1.0;"/><line style="stroke: #5D5D5D; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" x1="191" x2="703" y1="700.2598" y2="700.2598"/><text fill="#5D5D5D" font-family="Tahoma" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="203" y="695.3682">Requested Resources</text><!--MD5=[6fec97ff7c357bb47413f24028bfd147]
@startuml
skinparam shadowing false
skinparam defaultFontName Tahoma

skinparam usecase {
     FontName "Tahoma"
     FontSize 16
     BorderColor #e6e6e6
     BackGroundColor #e6e6e6
     FontColor #5d5d5d
}

skinparam actor  {
    FontName "Tahoma"
    FontSize 16
    FontColor #5d5d5d
    BackGroundColor white
    BorderColor #5d5d5d
    FontName "Tahoma"
}

skinparam participant  {
     FontName "Tahoma"
     FontSize 16
     FontColor #white
     BackGroundColor #5d5d5d
     BorderColor #5d5d5d
}

skinparam rectangle  {
     BorderThickness 1
     Padding 24
     FontName "Tahoma"
     FontSize 16
     FontStyle bold
     FontColor #222222
     BorderColor #b6b6b6
     BackGroundColor #white
}

skinparam State  {
     BorderThickness 1
     Padding 24
     FontName "Tahoma"
     FontSize 16
     FontColor #222222
     BorderColor #b6b6b6
     BackGroundColor #white
}

skinparam Activity  {
     FontName "Tahoma"
     FontSize 14
     BorderColor #e6e6e6
     BackGroundColor #e6e6e6
     FontColor #5d5d5d
}

skinparam ActivityDiamond  {
     BorderThickness 1
     Padding 24
     FontName "Tahoma"
     FontSize 14
     FontColor #222222
     BorderColor #b6b6b6
     BackGroundColor #white
}

skinparam card  {
     FontName "Tahoma"
     FontSize 16
     FontColor #white
     BackGroundColor #5d5d5d
     BorderColor #5d5d5d
}


skinparam agent {
     RoundCorner 40
     FontName "Tahoma"
     FontSize 16
     BorderColor #e6e6e6
     BackGroundColor #e6e6e6
     FontColor #5d5d5d
}

skinparam cloud { 
     FontName "Tahoma"
     FontSize 16    
     FontColor #222222
     BorderColor #b6b6b6
     BackGroundColor #white
}

skinparam Arrow{
    Color #222222
    FontColor #222222
    FontSize 14
    Thickness 1
    FontName "Tahoma"
}

skinparam Line{
    Color #222222
    FontColor #222222
    FontSize 14
    Thickness 1
    FontName "Tahoma"
}

skinparam Sequence {
    ArrowColor #5d5d5d
    ArrowFontColor #5d5d5d
    ArrowFontSize 14
    ArrowThickness 2
    ArrowFontName "Tahoma"
    LineColor #5d5d5d
    LineFontColor #5d5d5d
    LineFontSize 14
    LineThickness 2
    LineFontName "Tahoma"
    LifeLineBackgroundColor #5d5d5d
    LifeLineBorderColor #5d5d5d
    LifeLineBorderThickness 2
    GroupBorderColor #5d5d5d
    GroupBorderThickness 1
    GroupBackgroundColor white
    GroupHeaderFontColor #5d5d5d
}


actor "Customer" as customer
participant "Client\nApp" as partner
participant "Farfetch\nSTS" as farfetch
participant "/wishlists" as resource

group Authorization Code request
    customer -> partner: Clicks in login link
    partner -> farfetch: Requests Authorization Code\nreponse_type=code <back:#e6e6e6>""id_token""</back>\n<back:#e6e6e6>+ openid scope</back> + ""offline_access""
    farfetch - -> customer: ""302 Found"" redirect to authentication prompt
    customer -> farfetch: User authenticates with\nusername, password, and consent
    farfetch -> farfetch: Validates\nResource Owner\ncredentials
    farfetch - -> partner: Authorization Code Response\n<back:#e6e6e6>+ ""id_token""</back>
end
group Access Token request
    partner -> farfetch: Requests Access Token with\nClient Credentials and Authorization Code
    farfetch -> farfetch: Validates\nClient Credentials\nand Authorization Code
    farfetch - -> partner: Access Token Response (and optionally Refresh Token)
end
group Protected resource access
    partner -> resource: Requests Resources (""Authorization: Bearer <access token>"")
    resource - -> partner: Requested Resources
end
@enduml

PlantUML version 1.2019.11(Sun Sep 22 11:02:15 BST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Java Version: 1.8.0_271-b09
Operating System: Windows 10
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>