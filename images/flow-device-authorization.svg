<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="621px" preserveAspectRatio="none" style="width:717px;height:621px;background:#FFFFFF;" version="1.1" viewBox="0 0 717 621" width="717px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="134.4082" style="stroke:#5D5D5D;stroke-width:1.0;" width="435" x="266.5" y="102.125"/><rect fill="none" height="143.1289" style="stroke:#5D5D5D;stroke-width:1.0;" width="691.5" x="10" y="250.5332"/><rect fill="none" height="112.6016" style="stroke:#5D5D5D;stroke-width:1.0;" width="455" x="256.5" y="407.6621"/><rect fill="none" height="49.3008" style="stroke:#5D5D5D;stroke-width:1.0;" width="435" x="266.5" y="432.3535"/><line style="stroke:#5D5D5D;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="57" x2="57" y1="85.125" y2="537.2637"/><line style="stroke:#5D5D5D;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="307.5" x2="307.5" y1="85.125" y2="537.2637"/><line style="stroke:#5D5D5D;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="655.5" x2="655.5" y1="85.125" y2="537.2637"/><text fill="#5D5D5D" font-family="&quot;Tahoma&quot;" font-size="16" lengthAdjust="spacing" textLength="68" x="20" y="81.6094">Customer</text><ellipse cx="57" cy="13.5" fill="#FFFFFF" rx="8" ry="8" style="stroke:#5D5D5D;stroke-width:0.5;"/><path d="M57,21.5 L57,48.5 M44,29.5 L70,29.5 M57,48.5 L44,63.5 M57,48.5 L70,63.5 " fill="none" style="stroke:#5D5D5D;stroke-width:0.5;"/><text fill="#5D5D5D" font-family="&quot;Tahoma&quot;" font-size="16" lengthAdjust="spacing" textLength="68" x="20" y="552.873">Customer</text><ellipse cx="57" cy="564.8887" fill="#FFFFFF" rx="8" ry="8" style="stroke:#5D5D5D;stroke-width:0.5;"/><path d="M57,572.8887 L57,599.8887 M44,580.8887 L70,580.8887 M57,599.8887 L44,614.8887 M57,599.8887 L70,614.8887 " fill="none" style="stroke:#5D5D5D;stroke-width:0.5;"/><rect fill="#5D5D5D" height="54.25" rx="2.5" ry="2.5" style="stroke:#5D5D5D;stroke-width:0.5;" width="63" x="276.5" y="29.875"/><text fill="#FFFFFF" font-family="&quot;Tahoma&quot;" font-size="16" lengthAdjust="spacing" textLength="40" x="288" y="53.4844">Client</text><text fill="#FFFFFF" font-family="&quot;Tahoma&quot;" font-size="16" lengthAdjust="spacing" textLength="49" x="283.5" y="73.6094">Device</text><rect fill="#5D5D5D" height="54.25" rx="2.5" ry="2.5" style="stroke:#5D5D5D;stroke-width:0.5;" width="63" x="276.5" y="536.2637"/><text fill="#FFFFFF" font-family="&quot;Tahoma&quot;" font-size="16" lengthAdjust="spacing" textLength="40" x="288" y="559.873">Client</text><text fill="#FFFFFF" font-family="&quot;Tahoma&quot;" font-size="16" lengthAdjust="spacing" textLength="49" x="283.5" y="579.998">Device</text><rect fill="#5D5D5D" height="54.25" rx="2.5" ry="2.5" style="stroke:#5D5D5D;stroke-width:0.5;" width="71" x="620.5" y="29.875"/><text fill="#FFFFFF" font-family="&quot;Tahoma&quot;" font-size="16" lengthAdjust="spacing" textLength="57" x="627.5" y="53.4844">Farfetch</text><text fill="#FFFFFF" font-family="&quot;Tahoma&quot;" font-size="16" lengthAdjust="spacing" textLength="31" x="640.5" y="73.6094">STS</text><rect fill="#5D5D5D" height="54.25" rx="2.5" ry="2.5" style="stroke:#5D5D5D;stroke-width:0.5;" width="71" x="620.5" y="536.2637"/><text fill="#FFFFFF" font-family="&quot;Tahoma&quot;" font-size="16" lengthAdjust="spacing" textLength="57" x="627.5" y="559.873">Farfetch</text><text fill="#FFFFFF" font-family="&quot;Tahoma&quot;" font-size="16" lengthAdjust="spacing" textLength="31" x="640.5" y="579.998">STS</text><path d="M266.5,102.125 L526.5,102.125 L526.5,109.8164 L516.5,119.8164 L266.5,119.8164 L266.5,102.125 " fill="#FFFFFF" style="stroke:#5D5D5D;stroke-width:1.5;"/><rect fill="none" height="134.4082" style="stroke:#5D5D5D;stroke-width:1.0;" width="435" x="266.5" y="102.125"/><text fill="#5D5D5D" font-family="Tahoma" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="215" x="281.5" y="116.1313">Device Verification Code Request</text><polygon fill="#5D5D5D" points="644,157.7051,654,161.7051,644,165.7051,648,161.7051" style="stroke:#5D5D5D;stroke-width:1.0;"/><line style="stroke:#5D5D5D;stroke-width:2.0;" x1="308" x2="650" y1="161.7051" y2="161.7051"/><text fill="#5D5D5D" font-family="&quot;Tahoma&quot;" font-size="14" lengthAdjust="spacing" textLength="295" x="315" y="138.3496">Requets Device Verification Code with Client Id</text><text fill="#5D5D5D" font-family="&quot;Tahoma&quot;" font-size="14" lengthAdjust="spacing" textLength="57" x="315" y="156.6289">+ scopes</text><text fill="#5D5D5D" font-family="monospace" font-size="14" lengthAdjust="spacing" textLength="232" x="376" y="155.501">openid profile offline_access</text><polygon fill="#5D5D5D" points="319,224.5332,309,228.5332,319,232.5332,315,228.5332" style="stroke:#5D5D5D;stroke-width:1.0;"/><line style="stroke:#5D5D5D;stroke-width:2.0;" x1="313" x2="655" y1="228.5332" y2="228.5332"/><text fill="#5D5D5D" font-family="&quot;Tahoma&quot;" font-size="14" lengthAdjust="spacing" textLength="81" x="325" y="188.2383">Device Code</text><text fill="#5D5D5D" font-family="&quot;Tahoma&quot;" font-size="14" lengthAdjust="spacing" textLength="75" x="325" y="205.8477">+User Code</text><text fill="#5D5D5D" font-family="&quot;Tahoma&quot;" font-size="14" lengthAdjust="spacing" textLength="172" x="325" y="223.457">+Verification URI Response</text><path d="M10,250.5332 L188,250.5332 L188,258.2246 L178,268.2246 L10,268.2246 L10,250.5332 " fill="#FFFFFF" style="stroke:#5D5D5D;stroke-width:1.5;"/><rect fill="none" height="143.1289" style="stroke:#5D5D5D;stroke-width:1.0;" width="691.5" x="10" y="250.5332"/><text fill="#5D5D5D" font-family="Tahoma" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="133" x="25" y="264.5396">User Code Validation</text><polygon fill="#5D5D5D" points="68,287.834,58,291.834,68,295.834,64,291.834" style="stroke:#5D5D5D;stroke-width:1.0;"/><line style="stroke:#5D5D5D;stroke-width:2.0;" x1="62" x2="307" y1="291.834" y2="291.834"/><text fill="#5D5D5D" font-family="&quot;Tahoma&quot;" font-size="14" lengthAdjust="spacing" textLength="227" x="74" y="286.7578">Sends User Code + Verification URI.</text><line style="stroke:#5D5D5D;stroke-width:2.0;" x1="57" x2="99" y1="341.0527" y2="341.0527"/><line style="stroke:#5D5D5D;stroke-width:2.0;" x1="99" x2="99" y1="341.0527" y2="354.0527"/><line style="stroke:#5D5D5D;stroke-width:2.0;" x1="58" x2="99" y1="354.0527" y2="354.0527"/><polygon fill="#5D5D5D" points="68,350.0527,58,354.0527,68,358.0527,64,354.0527" style="stroke:#5D5D5D;stroke-width:1.0;"/><text fill="#5D5D5D" font-family="&quot;Tahoma&quot;" font-size="14" lengthAdjust="spacing" textLength="166" x="64" y="318.3672">Opens the Verification URI</text><text fill="#5D5D5D" font-family="&quot;Tahoma&quot;" font-size="14" lengthAdjust="spacing" textLength="163" x="64" y="335.9766">and enters the User Code</text><polygon fill="#5D5D5D" points="68,381.6621,58,385.6621,68,389.6621,64,385.6621" style="stroke:#5D5D5D;stroke-width:1.0;"/><line style="stroke:#5D5D5D;stroke-width:2.0;" x1="62" x2="655" y1="385.6621" y2="385.6621"/><text fill="#5D5D5D" font-family="&quot;Tahoma&quot;" font-size="14" lengthAdjust="spacing" textLength="153" x="74" y="380.5859">Validates the User Code</text><path d="M256.5,407.6621 L397.5,407.6621 L397.5,415.3535 L387.5,425.3535 L256.5,425.3535 L256.5,407.6621 " fill="#FFFFFF" style="stroke:#5D5D5D;stroke-width:1.5;"/><rect fill="none" height="112.6016" style="stroke:#5D5D5D;stroke-width:1.0;" width="455" x="256.5" y="407.6621"/><text fill="#5D5D5D" font-family="Tahoma" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="96" x="271.5" y="421.6685">Token Request</text><path d="M266.5,432.3535 L338.5,432.3535 L338.5,440.0449 L328.5,450.0449 L266.5,450.0449 L266.5,432.3535 " fill="#FFFFFF" style="stroke:#5D5D5D;stroke-width:1.5;"/><rect fill="none" height="49.3008" style="stroke:#5D5D5D;stroke-width:1.0;" width="435" x="266.5" y="432.3535"/><text fill="#5D5D5D" font-family="Tahoma" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="281.5" y="446.3599">loop</text><text fill="#000000" font-family="Tahoma" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="222" x="353.5" y="445.3589">[until User Code validation is complete]</text><polygon fill="#5D5D5D" points="644,469.6543,654,473.6543,644,477.6543,648,473.6543" style="stroke:#5D5D5D;stroke-width:1.0;"/><line style="stroke:#5D5D5D;stroke-width:2.0;" x1="308" x2="650" y1="473.6543" y2="473.6543"/><text fill="#5D5D5D" font-family="&quot;Tahoma&quot;" font-size="14" lengthAdjust="spacing" textLength="210" x="315" y="468.5781">Polls with Device Code + Client Id</text><polygon fill="#5D5D5D" points="319,508.2637,309,512.2637,319,516.2637,315,512.2637" style="stroke:#5D5D5D;stroke-width:1.0;"/><line style="stroke:#5D5D5D;stroke-width:2.0;" x1="313" x2="655" y1="512.2637" y2="512.2637"/><text fill="#5D5D5D" font-family="&quot;Tahoma&quot;" font-size="14" lengthAdjust="spacing" textLength="324" x="325" y="507.1875">Access Token + Optional Refresh Token Response</text><!--MD5=[e311487fada5729b0493f0099f396f7b]
@startuml
!include diagram-config.puml!tutorial

actor "Customer" as customer
participant "Client\nDevice" as client
participant "Farfetch\nSTS" as farfetch

group Device Verification Code Request
    client -> farfetch: Requets Device Verification Code with Client Id\n+ scopes ""openid profile offline_access""
    farfetch -> client: Device Code\n+User Code\n+Verification URI Response
end
group User Code Validation
    client -> customer: Sends User Code + Verification URI.
    customer -> customer: Opens the Verification URI\nand enters the User Code
    farfetch -> customer: Validates the User Code
end    
group Token Request
loop until User Code validation is complete
    client -> farfetch: Polls with Device Code + Client Id
end
    
    farfetch -> client: Access Token + Optional Refresh Token Response

end

@enduml

@startuml
skinparam shadowing false
skinparam defaultFontName Tahoma

skinparam usecase {
     FontName "Tahoma"
     FontSize 16
     BorderColor #e6e6e6
     BackGroundColor #e6e6e6
     FontColor #5d5d5d
}

skinparam actor  {
    FontName "Tahoma"
    FontSize 16
    FontColor #5d5d5d
    BackGroundColor white
    BorderColor #5d5d5d
    FontName "Tahoma"
}

skinparam participant  {
     FontName "Tahoma"
     FontSize 16
     FontColor #white
     BackGroundColor #5d5d5d
     BorderColor #5d5d5d
}

skinparam rectangle  {
     BorderThickness 1
     Padding 24
     FontName "Tahoma"
     FontSize 16
     FontColor #222222
     BorderColor #b6b6b6
     BackGroundColor #white
}

skinparam State  {
     BorderThickness 1
     Padding 24
     FontName "Tahoma"
     FontSize 16
     FontColor #222222
     BorderColor #b6b6b6
     BackGroundColor #white
}

skinparam Activity  {
     FontName "Tahoma"
     FontSize 14
     BorderColor #e6e6e6
     BackGroundColor #e6e6e6
     FontColor #5d5d5d
}

skinparam ActivityDiamond  {
     BorderThickness 1
     Padding 24
     FontName "Tahoma"
     FontSize 14
     FontColor #222222
     BorderColor #b6b6b6
     BackGroundColor #white
}

skinparam card  {
     FontName "Tahoma"
     FontSize 16
     FontColor #white
     BackGroundColor #5d5d5d
     BorderColor #5d5d5d
}


skinparam agent {
     RoundCorner 40
     FontName "Tahoma"
     FontSize 16
     BorderColor #e6e6e6
     BackGroundColor #e6e6e6
     FontColor #5d5d5d
}

skinparam cloud { 
     FontName "Tahoma"
     FontSize 16    
     FontColor #222222
     BorderColor #b6b6b6
     BackGroundColor #white
}

skinparam Arrow{
    Color #222222
    FontColor #222222
    FontSize 14
    Thickness 1
    FontName "Tahoma"
}

skinparam Line{
    Color #222222
    FontColor #222222
    FontSize 14
    Thickness 1
    FontName "Tahoma"
}

skinparam Sequence {
    ArrowColor #5d5d5d
    ArrowFontColor #5d5d5d
    ArrowFontSize 14
    ArrowThickness 2
    ArrowFontName "Tahoma"
    LineColor #5d5d5d
    LineFontColor #5d5d5d
    LineFontSize 14
    LineThickness 2
    LineFontName "Tahoma"
    LifeLineBackgroundColor #5d5d5d
    LifeLineBorderColor #5d5d5d
    LifeLineBorderThickness 2
    GroupBorderColor #5d5d5d
    GroupBorderThickness 1
    GroupBackgroundColor white
    GroupHeaderFontColor #5d5d5d
}


actor "Customer" as customer
participant "Client\nDevice" as client
participant "Farfetch\nSTS" as farfetch

group Device Verification Code Request
    client -> farfetch: Requets Device Verification Code with Client Id\n+ scopes ""openid profile offline_access""
    farfetch -> client: Device Code\n+User Code\n+Verification URI Response
end
group User Code Validation
    client -> customer: Sends User Code + Verification URI.
    customer -> customer: Opens the Verification URI\nand enters the User Code
    farfetch -> customer: Validates the User Code
end    
group Token Request
loop until User Code validation is complete
    client -> farfetch: Polls with Device Code + Client Id
end
    
    farfetch -> client: Access Token + Optional Refresh Token Response

end

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>